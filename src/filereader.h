#ifndef FILEREADER_H
#define FILEREADER_H

#include <QDebug>
#include <QFile>
#include <QJsonDocument>
#include <QJsonObject>
#include <QObject>
#include <QRegularExpression>
#include <QRegularExpressionMatch>
#include <QUrl>

class FileReader : public QObject
{
    Q_OBJECT

    Q_PROPERTY( QList<qreal> coordinates READ coordinates )

    QList<qreal> mCoordinates;
    QJsonObject mJson;

    int i = 0;
    QStringList mList { "20200820,095357,59.8944104000,N,30.2840822000,E",
                "20200820,095358,59.8942798000,N,30.2838844000,E",
                "20200820,095359,59.8941492000,N,30.2836866000,E",
                "20200820,095400,59.8940186000,N,30.2834888000,E",
                "20200820,095401,59.8938880000,N,30.2832910000,E",
                "20200820,095402,59.8937574000,N,30.2830932000,E",
                "20200820,095403,59.8936268000,N,30.2828954000,E",
                "20200820,095404,59.8934962000,N,30.2826976000,E",
                "20200820,095405,59.8933656000,N,30.2824998000,E",
                "20200820,095406,59.8932350000,N,30.2823020000,E",
                "20200820,095407,59.8933656000,N,30.2824998000,E",
                "20200820,095408,59.8934962000,N,30.2826976000,E",
                "20200820,095409,59.8936268000,N,30.2828954000,E",
                "20200820,095410,59.8937574000,N,30.2830932000,E",
                "20200820,095411,59.8938880000,N,30.2832910000,E",
                "20200820,095412,59.8940186000,N,30.2834888000,E",
                "20200820,095413,59.8941492000,N,30.2836866000,E",
                "20200820,095414,59.8942798000,N,30.2838844000,E",
                "20200820,095415,59.8944104000,N,30.2840822000,E",
                "20200820,095416,59.8945410000,N,30.2842800000,E" };

    QString str = "20200820,095357,59.8944104000,N,30.2840822000,E \
               20200820,095358,59.8942798000,N,30.2838844000,E \
               20200820,095359,59.8941492000,N,30.2836866000,E \
               20200820,095400,59.8940186000,N,30.2834888000,E \
               20200820,095401,59.8938880000,N,30.2832910000,E \
               20200820,095402,59.8937574000,N,30.2830932000,E \
               20200820,095403,59.8936268000,N,30.2828954000,E \
               20200820,095404,59.8934962000,N,30.2826976000,E \
               20200820,095405,59.8933656000,N,30.2824998000,E \
               20200820,095406,59.8932350000,N,30.2823020000,E \
               20200820,095407,59.8933656000,N,30.2824998000,E \
               20200820,095408,59.8934962000,N,30.2826976000,E \
               20200820,095409,59.8936268000,N,30.2828954000,E \
               20200820,095410,59.8937574000,N,30.2830932000,E \
               20200820,095411,59.8938880000,N,30.2832910000,E \
               20200820,095412,59.8940186000,N,30.2834888000,E \
               20200820,095413,59.8941492000,N,30.2836866000,E \
               20200820,095414,59.8942798000,N,30.2838844000,E \
               20200820,095415,59.8944104000,N,30.2840822000,E \
               20200820,095416,59.8945410000,N,30.2842800000,E";

public:
    FileReader( QObject *parent = nullptr );
    ~FileReader() = default;

    QList<qreal> coordinates()
    {
        return mCoordinates;
    }

signals:
    void sendString( QString lst );

public Q_SLOTS:
    void send();
    void readFile( const QString &path );
    void saveToJson( const QString &path );
    void saveMarker( qreal longitude, qreal latitude );
};

#endif // FILEREADER_H
